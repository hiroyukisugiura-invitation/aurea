<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AUREA Settings</title>

  <!-- Font Awesome（全アイコンはここから） -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  
  <style>
    :root{
      --bg:#0e0f10;
      --text:#e7e7e7;
      --muted:#a9aaac;
      --line:rgba(255,255,255,.08);
      --soft:rgba(255,255,255,.06);
      --shadow:0 10px 30px rgba(0,0,0,.45);

      --modalBg: rgba(20,21,22,.96);
      --modalBorder: rgba(255,255,255,.10);

      --card:rgba(255,255,255,.03);
      --cardBorder:rgba(255,255,255,.10);

      --dangerBg: rgba(255,80,80,.10);
      --dangerBd: rgba(255,80,80,.28);

      --okBg: rgba(120,220,140,.10);
      --okBd: rgba(120,220,140,.24);

      --font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Hiragino Sans", "Noto Sans JP", sans-serif;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:radial-gradient(1200px 800px at 50% 30%, rgba(255,255,255,.05), transparent 60%), var(--bg);
      color:var(--text);
      font-family:var(--font);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Overlay + Modal */
    .overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }

    .modal{
      width:min(1040px, calc(100% - 24px));
      height:min(760px, calc(100vh - 64px));
      background:var(--modalBg);
      border:1px solid var(--modalBorder);
      border-radius:18px;
      box-shadow:var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      display:grid;
      grid-template-columns: 300px 1fr;
      min-width:0;
      position:relative;
    }

    .close{
      position:absolute;
      top:10px;
      right:10px;
      width:36px;height:36px;border-radius:10px;
      border:1px solid transparent;
      background:transparent;
      color:var(--text);
      cursor:pointer;
      display:grid;place-items:center;
      z-index:4;
    }
    .close:hover{background:var(--soft);border-color:rgba(255,255,255,.06)}
    .close i{font-size:16px;opacity:.92}

    /* Tabs (CSS-only) */
    .tab-input{
      position:fixed;
      left:-9999px;
      width:1px;height:1px;
      overflow:hidden;
      opacity:0;
      pointer-events:none;
    }

    /* Left nav */
    .nav{
      border-right:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.02), transparent 35%);
      display:flex;
      flex-direction:column;
      min-width:0;
    }

    .nav-hd{
      padding:18px 16px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .nav-title{
      font-size:14px;
      color:rgba(255,255,255,.92);
      letter-spacing:.02em;
    }

    .nav-list{
      padding:6px;
      display:flex;
      flex-direction:column;
      gap:2px;
      overflow:auto;
      min-height:0;
    }

    .nav-item{
      width:100%;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid transparent;
      background:transparent;
      color:rgba(255,255,255,.88);
      cursor:pointer;
      text-align:left;
      font-size:13px;
      line-height:1;
      user-select:none;
    }
    .nav-item:hover{background:var(--soft)}
    .nav-ic{
      width:18px;height:18px;
      display:grid;place-items:center;
      opacity:.9;flex:0 0 auto;
    }

    .nav-ic i{font-size:14px}

    #tab-general:checked ~ .overlay .modal .nav label[for="tab-general"],
    #tab-apps:checked ~ .overlay .modal .nav label[for="tab-apps"],
    #tab-data:checked ~ .overlay .modal .nav label[for="tab-data"],
    #tab-trainer:checked ~ .overlay .modal .nav label[for="tab-trainer"],
    #tab-account:checked ~ .overlay .modal .nav label[for="tab-account"]{
      background:rgba(255,255,255,.08);
      border-color:rgba(255,255,255,.10);
    }

    /* Right content */
    .content{
      min-width:0;
      display:flex;
      flex-direction:column;
      height:100%;
    }

    .panel{
      display:none;
      height:100%;
      min-height:0;
      flex-direction:column;
    }
    #tab-general:checked ~ .overlay .modal .content .panel-general{display:flex}
    #tab-apps:checked ~ .overlay .modal .content .panel-apps{display:flex}
    #tab-data:checked ~ .overlay .modal .content .panel-data{display:flex}
    #tab-trainer:checked ~ .overlay .modal .content .panel-trainer{display:flex}
    #tab-account:checked ~ .overlay .modal .content .panel-account{display:flex}

    /* ===== 規約・規定：フォント統一 ===== */
    .panel-account .reg-wrap,
    .panel-account .reg-wrap *{
      font-family: var(--font);
      font-size: 13px;
      font-weight: 400;
      letter-spacing: 0;
    }

    /* タイトルだけは他見出しに合わせて少し強め（必要なら消してOK） */
    .panel-account .reg-head{
      font-size:14px;
      font-weight:700;
    }

    /* タブ文字（特定商取引法/利用規約/プライバシー） */
    .panel-account .reg-tab{
      font-family: var(--font);
    }

    .content-hd{
      padding:18px 18px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      min-width:0;
      flex:0 0 auto;
    }
    .content-title{
      font-size:16px;
      color:rgba(255,255,255,.94);
      letter-spacing:.01em;
    }
    .content-sub{
      font-size:12px;
      color:rgba(255,255,255,.58);
      margin-top:6px;
      line-height:1.5;
    }

    .content-bd{
      padding:16px 18px 18px;
      overflow:auto;
      min-height:0;
      flex:1 1 auto;
    }

    /* Sections */
    .section{
      border:1px solid var(--cardBorder);
      background:var(--card);
      border-radius:16px;
      padding:14px 14px;
      margin-bottom:14px;
    }

    /* Apps: 外側の大枠（sectionカード）を消す */
    .panel-apps .section{
      border:0;
      background:transparent;
      border-radius:0;
      padding:0;
      margin:0;
    }

    /* 枠をやめて「線」で見せる（アプリ以外の小詳細） */
    .panel-general .section,
    .panel-data .section,
    .panel-trainer .section,
    .panel-account .section{
      border:0;
      background:transparent;
      border-radius:0;
      padding:0;     /* ✅ 余白を消して「一覧」へ */
      margin:0;
    }

    /* セクション同士は区切り線 */
    .panel-general .section + .section,
    .panel-data .section + .section,
    .panel-trainer .section + .section,
    .panel-account .section + .section{
      margin-top:18px;
      padding-top:18px;
      border-top:1px solid var(--line);
    }

    /* Security: titleと上枠の詰まりを解消（他タブへ影響させない） */
    /* ✅ 全タブ共通の section padding に統一したため削除 */
    .sec-title{
      font-size:14px;
      color:rgba(255,255,255,.92);
      line-height:1.2;
      margin:0 0 12px 0;
    }
    .sec-desc{
      font-size:12px;
      color:rgba(255,255,255,.60);
      line-height:1.55;
      margin-top:6px;
    }

    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 0;
      border-top:1px solid rgba(255,255,255,.08);
    }
    .row:first-of-type{border-top:0;padding-top:0}
    .row:last-of-type{padding-bottom:0}

    .row .l{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .row .k{
      font-size:13px;
      color:rgba(255,255,255,.88);
      line-height:1.2;
    }
    .row .v{
      font-size:12px;
      color:rgba(255,255,255,.55);
      line-height:1.45;
    }

    /* Controls */
    .btn{
      height:34px;
      padding:0 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:rgba(255,255,255,.85);
      cursor:pointer;
      user-select:none;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }
    .btn:hover{background:rgba(255,255,255,.08)}
    .btn i{font-size:14px;opacity:.92}

    .btn.secondary{
      background:transparent;
      border-color:rgba(255,255,255,.10);
      color:rgba(255,255,255,.78);
    }
    .btn.secondary:hover{background:rgba(255,255,255,.06)}

    .btn.ok{
      border-color:var(--okBd);
      background:var(--okBg);
      color:rgba(210,255,220,.95);
    }

    .btn.danger{
      border-color:rgba(255,255,255,.14);
      background:transparent;
      color:rgba(255,255,255,.86);
    }
    .btn.danger:hover{
      background:rgba(255,255,255,.06);
      border-color:rgba(255,255,255,.18);
    }

    .select{
      height:34px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:rgba(255,255,255,.86);
      padding:0 10px;
      font-size:13px;
      outline:0;
      cursor:pointer;
    }

    .input{
      height:34px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:rgba(255,255,255,.90);
      padding:0 10px;
      font-size:13px;
      outline:0;
      width:min(420px, 100%);
    }

    .muted{color:rgba(255,255,255,.58)}

    .reg-wrap{
      border:0;
      background:transparent;
      padding:0;
    }
    .reg-head{
      font-size:14px;
      font-weight:700;
      color:rgba(255,255,255,.88);
      margin-bottom:10px;
      letter-spacing:.01em;
    }

    .reg-tabs{
      display:flex;
      align-items:center;
      gap:22px;
      padding:0;
      border-bottom:0;
    }
    .reg-tab{
      background:transparent;
      border:0;
      padding:10px 0;
      color:rgba(255,255,255,.68);
      font-size:13px;
      font-weight:700;
      cursor:pointer;
      position:relative;
      line-height:1;
    }
    .reg-tab:hover{color:rgba(255,255,255,.82)}
    .reg-tab[aria-selected="true"]{
      color:rgba(255,255,255,.82);
    }
    .reg-tab[aria-selected="true"]::after{
      content:none;
    }

    /* Apps */
    .apps-header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    .apps-title{
      font-size:16px;
      font-weight:700;
      color:rgba(255,255,255,.94);
    }
    .apps-sub{
      margin-top:6px;
      font-size:12px;
      color:rgba(255,255,255,.58);
      line-height:1.45;
    }

    .apps-grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap:14px;
      margin-top:12px;
    }

    .saas{
      border-radius:16px;
      border:1px solid var(--cardBorder);
      background:var(--card);
      padding:14px;
      min-height:150px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }
    .saas:hover{
      background:rgba(255,255,255,.035);
      border-color:rgba(255,255,255,.12);
    }

    .brand{
      width:38px;height:38px;border-radius:999px;
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.14);
    }
    .brand i{font-size:16px;color:#fff}

    .status-btn{
      margin-top:12px;
      height:34px;
      padding:0 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.035);
      color:rgba(255,255,255,.86);
      font-size:13px;
      font-weight:700;
      letter-spacing:.01em;
      cursor:pointer;
    }
    .status-btn:hover{
      background:rgba(255,255,255,.06);
      border-color:rgba(255,255,255,.18);
    }
    .status-btn.off{
      background:rgba(255,255,255,.035);
      border-color:rgba(255,255,255,.14);
      color:rgba(255,255,255,.82);
    }
    .status-btn.on{
      border-color:rgba(120,220,140,.28);
      background:rgba(120,220,140,.08);
      color:rgba(210,255,220,.95);
    }

    @media (max-width: 1080px){
      .apps-grid{grid-template-columns: repeat(3, minmax(0, 1fr));}
    }
@media (max-width: 920px){

  /* ✅ 縮小時は「中央配置」をやめて、上起点に固定 */
  .overlay{
    align-items:flex-start;         /* ← 上寄せ */
    justify-content:center;
    padding:12px;                   /* 余白は最小に */
  }

  /* ✅ 画面高に追従させて、中身は内部スクロールへ */
  .modal{
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;   /* ← nav = auto / content = 残り全部 */
    height:calc(100vh - 24px);
    max-height:none;
  }

  /* nav を上部へ */
  .nav{
    border-right:0;
    border-bottom:1px solid var(--line);
  }

  .nav-hd{
    padding:14px 14px 10px;
  }

  /* アイコンだけ中央表示（横スクロールなし） */
  .nav-list{
    flex-direction:row;
    justify-content:center;
    align-items:center;
    gap:10px;
    padding:10px 12px 12px;
    overflow:hidden;
    min-height:74px; /* アイコン列の高さを固定 */
  }

  .nav-item{
    width:44px;
    height:44px;
    padding:0;
    border-radius:0;
    background:transparent;
    border:1px solid transparent;
    justify-content:center;
    gap:0;

    /* ラベル文字は消す */
    font-size:0;
  }

  .nav-item:hover{
    background:transparent;
    border-color:transparent;
  }

  .nav-ic{
    width:22px;height:22px;
    opacity:.68; /* ← 非選択は薄め */
  }
  .nav-ic i{font-size:18px}

  /* 選択中：枠や背景は出さず、アイコンだけ強調 */
  #tab-general:checked ~ .overlay .modal .nav label[for="tab-general"],
  #tab-apps:checked ~ .overlay .modal .nav label[for="tab-apps"],
  #tab-data:checked ~ .overlay .modal .nav label[for="tab-data"],
  #tab-trainer:checked ~ .overlay .modal .nav label[for="tab-trainer"],
  #tab-account:checked ~ .overlay .modal .nav label[for="tab-account"]{
    background:transparent;
    border-color:transparent;
  }

  #tab-general:checked ~ .overlay .modal .nav label[for="tab-general"] .nav-ic,
  #tab-apps:checked ~ .overlay .modal .nav label[for="tab-apps"] .nav-ic,
  #tab-data:checked ~ .overlay .modal .nav label[for="tab-data"] .nav-ic,
  #tab-trainer:checked ~ .overlay .modal .nav label[for="tab-trainer"] .nav-ic,
  #tab-account:checked ~ .overlay .modal .nav label[for="tab-account"] .nav-ic{
    opacity:.98;
  }

  /* アプリ grid */
  .apps-grid{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  /* ✅ 一覧表（content-bd）は常にスクロール領域として機能 */
  .content-bd{
    padding-top:14px;
    overflow:auto;
    -webkit-overflow-scrolling:touch;

    display:flex;              /* ← 上詰め固定 */
    flex-direction:column;
    justify-content:flex-start;
    align-items:stretch;
  }

  .content-bd > *{
    flex:0 0 auto;             /* ← 下に落ちない */
  }
}

/* ===============================
   AI Stack Popup (UI unified)
=============================== */

#aiStackOverlay{
  align-items:center;
  justify-content:center;
}

#aiStackOverlay .modal{
  width:min(520px, calc(100% - 32px));
  height:auto;
  background:var(--modalBg);
  border:1px solid var(--modalBorder);
  border-radius:18px;
  box-shadow:var(--shadow);
  font-family:var(--font);
}

/* Header */
#aiStackOverlay .content-hd{
  padding:16px 18px;
  border-bottom:1px solid var(--line);
}

#aiStackOverlay .content-title{
  font-size:15px;
  font-weight:600;
  color:rgba(255,255,255,.92);
}

/* Close button */
#aiStackOverlay .close{
  top:12px;
  right:12px;
}

/* Body */
#aiStackOverlay .content-bd{
  padding:14px 18px 18px;
}

/* Table layout */
#aiStackOverlay .table{
  width:100%;
}

#aiStackOverlay .table__row{
  display:grid;
  grid-template-columns: 1fr 120px;
  gap:12px;
  padding:8px 0;
}

#aiStackOverlay .table__row--head{
  padding-top:0;
  padding-bottom:6px;
}

#aiStackOverlay .table__cell{
  font-size:13px;
  line-height:1.4;
  color:rgba(255,255,255,.86);
  font-family:var(--font);
}

#aiStackOverlay .table__row--head .table__cell{
  font-size:12px;
  font-weight:600;
  color:rgba(255,255,255,.55);
}

/* Row separator */
#aiStackOverlay .table__body .table__row{
  border-top:1px solid rgba(255,255,255,.08);
}

/* AI name emphasis */
#aiStackOverlay .table__body .table__row .table__cell:first-child{
  font-weight:500;
  color:rgba(255,255,255,.92);
}

/* Version column */
#aiStackOverlay .table__body .table__row .table__cell:last-child{
  text-align:right;
  color:rgba(255,255,255,.70);
  font-variant-numeric: tabular-nums;
}

  </style>
</head>

<body>
  <input class="tab-input" type="radio" name="tab" id="tab-general" checked>
  <input class="tab-input" type="radio" name="tab" id="tab-apps">
  <input class="tab-input" type="radio" name="tab" id="tab-data">
  <input class="tab-input" type="radio" name="tab" id="tab-trainer">
  <input class="tab-input" type="radio" name="tab" id="tab-account">

  <div class="overlay" aria-hidden="false">
    <div class="modal" role="dialog" aria-label="設定">
      <button class="close" type="button" aria-label="閉じる">
        <i class="fa-solid fa-xmark"></i>
      </button>

      <!-- Left nav -->
      <aside class="nav" aria-label="設定ナビ">
        <div class="nav-hd">
          <div class="nav-title">設定</div>
        </div>

        <div class="nav-list" role="list">
          <label class="nav-item" for="tab-general" role="listitem">
            <span class="nav-ic"><i class="fa-solid fa-sliders"></i></span>
            一般
          </label>

          <!-- 左カラム：アプリのアイコンを未設定→確実に設定 -->
          <label class="nav-item" for="tab-apps" role="listitem">
            <span class="nav-ic"><i class="fa-solid fa-plug-circle-bolt"></i></span>
            アプリ
          </label>

          <label class="nav-item" for="tab-data" role="listitem">
            <span class="nav-ic"><i class="fa-solid fa-database"></i></span>
            データ
          </label>

          <label class="nav-item" for="tab-trainer" role="listitem">
            <span class="nav-ic"><i class="fa-solid fa-layer-group"></i></span>
            AUREA Data Trainer
          </label>

          <label class="nav-item" for="tab-account" role="listitem">
            <span class="nav-ic"><i class="fa-regular fa-circle-user"></i></span>
            アカウント・セキュリティ
          </label>
        </div>
      </aside>

      <!-- Right content -->
      <section class="content" aria-label="設定内容">

        <!-- ===== General ===== -->
        <div class="panel panel-general">
          <header class="content-hd">
            <div style="min-width:0">
              <div class="content-title">一般</div>
                <div class="sec-desc">
                  端末の基本的な設定             
                </div>
            </div>
          </header>

          <div class="content-bd">
            <div class="section" aria-label="一般設定">
              <div class="row">
                <div class="l">
                  <div class="k">テーマ</div>
                </div>
                <select class="select" aria-label="テーマ">
                  <option>システム</option>
                  <option>ライト</option>
                  <option selected>ダーク</option>
                </select>
              </div>

              <div class="row">
                <div class="l">
                  <div class="k">言語</div>
                </div>
                <select class="select" aria-label="言語">
                  <option selected>日本語</option>
                  <option>English (US)</option>
                  <option>English (UK)</option>
                  <option>Español (ES)</option>
                  <option>Español (LATAM)</option>
                  <option>Français</option>
                  <option>Deutsch</option>
                  <option>Italiano</option>
                  <option>Português (BR)</option>
                  <option>Português (PT)</option>
                  <option>Nederlands</option>
                  <option>Svenska</option>
                  <option>Norsk</option>
                  <option>Dansk</option>
                  <option>Suomi</option>
                  <option>Polski</option>
                  <option>Čeština</option>
                  <option>Magyar</option>
                  <option>Română</option>
                  <option>Türkçe</option>
                  <option>Українська</option>
                  <option>Русский</option>
                  <option>العربية</option>
                  <option>עברית</option>
                  <option>हिन्दी</option>
                  <option>ภาษาไทย</option>
                  <option>Tiếng Việt</option>
                  <option>Bahasa Indonesia</option>
                  <option>Filipino</option>
                  <option>한국어</option>
                  <option>中文（简体）</option>
                  <option>中文（繁體）</option>
                </select>
              </div>

              <!-- Askへの送信方法：一般セクション内に配置 -->
              <div class="row">
                <div class="l">
                  <div class="k">AUREAへの送信方法</div>
                </div>
                <select class="select" aria-label="AUREAへの送信方法">
                  <option selected>⌘ + Enterで送信（Enterは改行）</option>
                  <option>Enterで送信（Shift + Enterで改行）</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- ===== Apps ===== -->
        <div class="panel panel-apps">
          <header class="content-hd">
            <div style="min-width:0">
              <div class="content-title">アプリ</div>
                 <div class="sec-desc">
                  各種SaaSと連携、任意でAPI接続が設定可能             
                </div>
            </div>
          </header>

          <div class="content-bd">
            <div class="section" aria-label="">
              <div class="apps-header">
                <div style="min-width:0">
                </div>
                <button class="btn" type="button">
                  <i class="fa-solid fa-plus"></i>
                  SaaS 追加
                </button>
              </div>

              <div class="apps-grid" aria-label="SaaS一覧">
                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-google" aria-hidden="true"><i class="fa-brands fa-google"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Google</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-gmail" aria-hidden="true"><i class="fa-solid fa-envelope"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Gmail</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-drive" aria-hidden="true"><i class="fa-brands fa-google-drive"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Google Drive</div>
                    <!-- 例として接続済みを1つ置く（見た目確認用） -->
                    <button class="status-btn on" type="button">接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-github" aria-hidden="true"><i class="fa-brands fa-github"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">GitHub</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-notion" aria-hidden="true"><i class="fa-brands fa-notion"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Notion</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-slack" aria-hidden="true"><i class="fa-brands fa-slack"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Slack</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-dropbox" aria-hidden="true"><i class="fa-brands fa-dropbox"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Dropbox</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-jira" aria-hidden="true"><i class="fa-brands fa-jira"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Jira</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-salesforce" aria-hidden="true"><i class="fa-brands fa-salesforce"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Salesforce</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>

                <div class="saas">
                  <div class="saas-top">
                    <div class="brand b-zoom" aria-hidden="true"><i class="fa-brands fa-zoom"></i></div>
                  </div>
                  <div>
                    <div class="saas-name">Zoom</div>
                    <button class="status-btn off" type="button">未接続</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ===== Data ===== -->
        <div class="panel panel-data">
          <header class="content-hd">
            <div style="min-width:0">
              <div class="content-title">データ</div>
                <div class="sec-desc">
                  データ管理や保存先について             
                </div>
            </div>
          </header>

          <div class="content-bd">
            <div class="section" aria-label="保存設定">
              <div class="row">
                <div class="l">
                  <div class="k">会話とデータの保存先</div>
                  <div class="v">現在：クラウド</div>
                </div>
                <select class="select" aria-label="会話とデータの保存先">
                  <option selected>クラウド</option>
                  <option>端末内</option>
                </select>
              </div>
            </div>

            <div class="section" aria-label="削除">
              <div class="row" style="border-top:0;padding-top:0">
                <div class="l">
                  <div class="k">すべてのチャットを削除する</div>
                </div>
                <button class="btn danger" type="button">
                  <i class="fa-solid fa-trash"></i>
                  削除
                </button>
              </div>
            </div>

            <!-- Knowledge Base：データタブ内に配置 -->
            <div class="section" aria-label="ナレッジベース">
              <div class="sec-title">ナレッジベース</div>
              <div class="sec-desc">
                Google Drive など、ユーザー・企業のストレージの保存先設定
                を参照します<br>AUREA によるファイル保存は一切せず、読み取りと検索のみを行っています
              </div>

              <div class="row" style="margin-top:10px;border-top:0;padding-top:0">
                <div class="l">
                  <div class="k">クラウドストレージ</div>
                  <div class="v">未接続</div>
                </div>
              </div>

              <div class="row" style="border-top:0;padding-top:0">
                <button class="btn secondary" type="button">
                  クラウドストレージと接続する（ Google Drive ）
                </button>
              </div>

              <div class="row" style="border-top:0;padding-top:0">
                <button class="btn secondary" type="button">
                  ドキュメントを一時アップロード（ AUREAには保存されません ）
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- ===== Trainer ===== -->
          <div class="panel panel-trainer">
            <header class="content-hd">
              <div style="min-width:0">
                <div class="content-title">AUREA Data Trainer , for Enterprise</div>
                <div class="sec-desc">
                  独自に社内AIを育てて業務効率化へ             
                </div>
              </div>
            </header>

            <div class="content-bd">
              <!-- 固定ブロック -->
              <div class="section">
                <div class="sec-title">AUREAを育てる（AET）</div>
                <div class="sec-desc">
                  「こんな質問にはこれ」といったケースを登録し、社内AIの回答精度を育てます             
                </div>

                <div class="row" style="margin-top:14px">
                  <div class="l">
                    <div class="k">対象プラン</div>
                    <div class="v">Enterprise 専用機能</div>
                  </div>
                </div>

                <div class="row">
                  <div class="l">
                    <div class="k">ステータス</div>
                    <div class="v">Coming Soon</div>
                  </div>
                </div>

                <div class="row" style="margin-top:10px">
                  <button class="btn secondary" type="button" disabled>
                    ケースを追加
                  </button>
                </div>
              </div>

              <!-- スクロール対象（一覧） -->
              <div id="trainerCases" aria-label="ケース一覧">
                <!-- JSでケース行をここに append する -->
              </div>
            </div>
          </div>

        <!-- ===== Account ===== -->
        <div class="panel panel-account">
          <header class="content-hd">
            <div style="min-width:0">
              <div class="content-title">アカウント・セキュリティ</div>
                <div class="sec-desc">
                  利用ユーザー情報とセキュリティ詳細             
                </div>
            </div>
          </header>

          <div class="content-bd">
            <!-- 1) 表示名 / ユーザー名 -->
            <div class="section" aria-label="">
              <div class="row">
                <div class="l">
                  <div class="k">表示名</div>
                </div>
                <input id="displayName" class="input" type="text" placeholder="Your name" />
              </div>

              <div class="row">
                <div class="l">
                  <div class="k">ユーザー名</div>
                  <div class="v">@handle（任意）</div>
                </div>
                  <input id="userName" class="input" type="text" placeholder="@—" value="" />
              </div>
            </div>

            <!-- 2) 現在のプラン -->
            <div class="section" aria-label="プラン">
              <div class="row">
                <div class="l">
                  <div class="k">現在のプラン</div>
                  <div class="v">Pro</div>
                </div>
                <button class="btn" type="button">
                  <i class="fa-regular fa-credit-card"></i>
                  請求情報
                </button>
              </div>
            </div>

            <!-- 3) 登録メールアドレス（セキュリティ） -->
            <div class="section" aria-label="サインイン">
              <div class="row" style="border-top:0;padding-top:0">
                <div class="l">
                  <div class="k">登録メールアドレス</div>
                  <div class="v" data-user-email>—</div>
                </div>
                <button class="btn secondary" type="button">
                  <i class="fa-solid fa-pen"></i>
                  変更
                </button>
              </div>
            </div>

            <!-- 4) 信頼できるデバイス（セキュリティ） -->
            <div class="section" aria-label="信頼できるデバイス">
              <div class="row" style="border-top:0;padding-top:0">
                <div class="l">
                  <div class="k">信頼できるデバイス</div>
                  <div class="v" data-trusted-device>—</div>
                </div>
                <button class="btn danger" type="button">
                  <i class="fa-solid fa-link-slash"></i>
                  この端末を解除
                </button>
              </div>
            </div>

            <!-- 5) 規約・規定 -->
            <div class="section" aria-label="規約・規定">
              <div class="reg-wrap" aria-label="規約・規定タブ">
                <div class="reg-head">規約・規定</div>
                <div class="reg-tabs" role="tablist" aria-label="規約・規定">
                  <button class="reg-tab" type="button" role="tab" aria-selected="true">特定商取引法</button>
                  <button class="reg-tab" type="button" role="tab" aria-selected="false">利用規約</button>
                  <button class="reg-tab" type="button" role="tab" aria-selected="false">プライバシー</button>
                </div>
              </div>
            </div>

            <!-- 6) AI Stack -->
            <div class="section" aria-label="AI Stack">
              <div class="row" style="border-top:0;padding-top:0">
                <div class="l">
                  <div class="k">AI Stack</div>
                  <div class="v">展開中のAIと最新Ver,</div>
                </div>
                <button class="btn secondary" type="button" id="btnOpenAiStackPopup">
                  一覧表
                </button>
              </div>
            </div>

            <!-- AI Stack Popup -->
            <div class="overlay" id="aiStackOverlay" style="display:none">
              <div class="modal" style="width:min(520px, calc(100% - 24px));height:auto">
                <button class="close" type="button" aria-label="閉じる" id="btnCloseAiStackPopup">
                  <i class="fa-solid fa-xmark"></i>
                </button>

                <div class="content" style="height:auto">
                  <header class="content-hd">
                    <div class="content-title">AI Stack</div>
                  </header>

                  <div class="content-bd">
                    <div class="table">
                      <div class="table__head">
                        <div class="table__row table__row--head">
                          <div class="table__cell">AI</div>
                          <div class="table__cell">Ver.</div>
                        </div>
                      </div>
                      <div class="table__body" id="aiStackPopupBody"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
<script>
/* ===============================
   Profile autosave
=============================== */
(function(){
  const KEY_NAME = 'aurea_profile_displayName';
  const KEY_USER = 'aurea_profile_userName';

  const nameEl = document.getElementById('displayName');
  const userEl = document.getElementById('userName');
  if(!nameEl || !userEl) return;

  const savedName = localStorage.getItem(KEY_NAME);
  const savedUser = localStorage.getItem(KEY_USER);
  if(savedName !== null) nameEl.value = savedName;
  if(savedUser !== null) userEl.value = savedUser;

  let t = null;
  const save = () => {
    localStorage.setItem(KEY_NAME, nameEl.value);
    localStorage.setItem(KEY_USER, userEl.value);
  };
  const queueSave = () => {
    clearTimeout(t);
    t = setTimeout(save, 300);
  };

  nameEl.addEventListener('input', queueSave);
  userEl.addEventListener('input', queueSave);
  nameEl.addEventListener('change', save);
  userEl.addEventListener('change', save);
})();

/* ===============================
   AI Stack (Latest Ver display)
   - 表示は [AI名][Ver.] のみ
   - Ver. は常に現行の最新バージョン文字列
=============================== */

// 表示用データ（最新版文字列のみ）
let AI_STACK = [
  { name: "GPT",        ver: "" },
  { name: "Claude",     ver: "" },
  { name: "Gemini",     ver: "" },
  { name: "Perplexity", ver: "" },
  { name: "Mistral",    ver: "" },
  { name: "Sora",       ver: "" }
];

// 最新バージョン取得（正規AI側追従：実装先差替え前提）
async function refreshAiStackLatest(){
  try{
    // 例：/api/ai-stack/latest から { GPT:"x.y", Claude:"x.y", ... } を取得
    // const res = await fetch("/api/ai-stack/latest", { credentials:"include" });
    // if(!res.ok) return;
    // const data = await res.json();
    // AI_STACK = AI_STACK.map(a => ({ ...a, ver: data[a.name] || "" }));

    // 暫定：空文字のまま（API接続時に自動反映）
  }catch(e){}
}

function escapeHtml(s){
  return String(s ?? "").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

function renderAiStackPopup(){
  const body = document.getElementById("aiStackPopupBody");
  if(!body) return;

  body.innerHTML = "";
  for(const a of AI_STACK){
    const row = document.createElement("div");
    row.className = "table__row";
    row.innerHTML = `
      <div class="table__cell">${escapeHtml(a.name)}</div>
      <div class="table__cell">${escapeHtml(a.ver)}</div>
    `;
    body.appendChild(row);
  }
}

document.addEventListener("DOMContentLoaded", async () => {
  const openBtn = document.getElementById("btnOpenAiStackPopup");
  const closeBtn = document.getElementById("btnCloseAiStackPopup");
  const overlay = document.getElementById("aiStackOverlay");

  await refreshAiStackLatest();
  renderAiStackPopup();

  openBtn?.addEventListener("click", () => {
    overlay.style.display = "flex";
  });

  closeBtn?.addEventListener("click", () => {
    overlay.style.display = "none";
  });

  overlay?.addEventListener("click", (e) => {
    if(e.target === overlay) overlay.style.display = "none";
  });
});
</script>
</body>
</html>
